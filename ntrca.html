<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>NTRCA Preparation Notes</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  font-family: Georgia, serif;
  background:#e6e6e6;
  padding:20px;
}

h1{
  font-size:34px;
  margin-bottom:8px;
}

#breadcrumb{
  font-size:15px;
  margin-bottom:15px;
}

input{
  width:100%;
  padding:10px;
  font-size:16px;
  margin-bottom:20px;
  display:none;
}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:20px;
}

.card{
  background:#fff;
  padding:25px 20px;
  border-radius:10px;
  box-shadow:0 6px 12px rgba(0,0,0,.15);
  text-align:center;
  cursor:pointer;
  transition:.2s;
}

.card:hover{
  transform:translateY(-5px);
}

.card h2{
  font-size:22px;
}

.card h3{
  font-size:18px;
}

.read{
  display:inline-block;
  margin-top:10px;
  font-size:16px;
  color:#5a2a82;
  text-decoration:none;
  border-bottom:2px solid #5a2a82;
}

.badge{
  font-size:12px;
  padding:4px 8px;
  border-radius:6px;
  margin-left:6px;
  background:#ccc;
  color:#000;
}

.readed{
  background:#4caf50;
  color:#fff;
}
</style>
</head>

<body>

<h1>NTRCA Preparation Notes</h1>
<div id="breadcrumb">NTRCA Notes</div>

<input id="searchBox" placeholder="ðŸ” Search chapter...">

<!-- LEVEL 1 -->
<div id="level1" class="grid">
  <div class="card" onclick="openCategory('SSC Agriculture')">
    <h2>ðŸ“˜ SSC Agriculture</h2>
  </div>
  <div class="card" onclick="openCategory('HSC Agriculture 1st Paper')">
    <h2>ðŸ“— HSC Agriculture 1st Paper</h2>
  </div>
  <div class="card" onclick="openCategory('HSC Agriculture 2nd Paper')">
    <h2>ðŸ“• HSC Agriculture 2nd Paper</h2>
  </div>
</div>

<!-- LEVEL 2 -->
<div id="level2" style="display:none;">
  <div class="grid" id="chapterGrid"></div>
</div>

<script>
const data = {
  "SSC Agriculture":[
    "ssc-first-chapter.pdf",
    "ssc-second-chapter.pdf",
    "ssc-third-chapter.pdf",
    "ssc-forth-chapter.pdf",
    "ssc-fifth-chapter.pdf",
    "ssc-sixth-chapter.pdf",
    "ssc-seventh-chapter.pdf"
  ],
  "HSC Agriculture 1st Paper":[
    "hsc-first-paper-first-chapter.pdf",
    "hsc-first-paper-second-chapter.pdf",
    "hsc-first-paper-third-chapter.pdf",
    "hsc-first-paper-forth-chapter.pdf",
    "hsc-first-paper-fifth-chapter.pdf",
    "hsc-first-paper-sixth-chapter.pdf"
  ],
  "HSC Agriculture 2nd Paper":[
    "hsc-second-paper-first-chapter.pdf",
    "hsc-second-paper-second-chapter.pdf",
    "hsc-second-paper-third-chapter.pdf",
    "hsc-second-paper-forth-chapter.pdf",
    "hsc-second-paper-fifth-chapter.pdf"
  ]
};

let currentCategory = "";

function openCategory(cat){
  currentCategory = cat;
  history.pushState({cat}, "");
  document.getElementById("level1").style.display="none";
  document.getElementById("level2").style.display="block";
  document.getElementById("searchBox").style.display="block";

  updateBreadcrumb();
  renderChapters("");
}

function updateBreadcrumb(){
  document.getElementById("breadcrumb").innerHTML =
    `<span style="cursor:pointer;color:#5a2a82"
      onclick="goHome()">NTRCA Notes</span> > ${currentCategory}
      (${data[currentCategory].length} PDFs)`;
}

function renderChapters(filter){
  const grid = document.getElementById("chapterGrid");
  grid.innerHTML="";

  data[currentCategory].forEach(file=>{
    if(!file.includes(filter)) return;

    const title = file.replace(".pdf","").replace(/-/g," ");
    const key = currentCategory + file;
    const read = localStorage.getItem(key);

    grid.innerHTML += `
      <div class="card">
        <h3>${title}
          <span class="badge ${read?'readed':''}">
            ${read?'READ':'NEW'}
          </span>
        </h3>
        <a class="read"
          href="viewer/index.html?pdf=pdf/ntrca/ntrca-notes/${file}"
          onclick="markRead('${key}')">
          ðŸ“– Read PDF
        </a>
      </div>
    `;
  });
}

function markRead(key){
  localStorage.setItem(key,true);
}

function goHome(){
  document.getElementById("level2").style.display="none";
  document.getElementById("level1").style.display="grid";
  document.getElementById("searchBox").style.display="none";
  document.getElementById("breadcrumb").innerText="NTRCA Notes";
}

document.getElementById("searchBox").addEventListener("input",e=>{
  renderChapters(e.target.value);
});

window.onpopstate = function(){
  goHome();
};
</script>

</body>
</html>
