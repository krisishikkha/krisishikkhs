<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-LGK67QBZD3"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-LGK67QBZD3');
  </script>

  <meta charset="UTF-8">
  <title>Krisishikkha | Education & PDF Notes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#2e7d32">

<style>
body{
  font-family: Georgia, serif;
  background:#f3f3f3;
  margin:0;
}
.container{
  max-width:1000px;
  margin:auto;
  padding:20px;
}
h1{
  font-size:28px;
  margin-bottom:6px;
}
p{
  font-size:16px;
  color:#444;
}
.main-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
  gap:16px;
  margin:25px 0;
}
.main-box{
  display:flex;
  align-items:center;
  justify-content:center;
  min-height:70px;
  padding:14px;
  border-radius:12px;
  font-size:16px;
  font-weight:bold;
  text-decoration:none;
  color:#fff;
  text-align:center;
  box-shadow:0 6px 14px rgba(0,0,0,.18);
  transition:.25s;
}
.main-box:hover{
  transform:translateY(-3px);
  box-shadow:0 10px 20px rgba(0,0,0,.28);
}
.ntrca{background:linear-gradient(135deg,#2e7d32,#81c784);}
.bcs{background:linear-gradient(135deg,#0d47a1,#64b5f6);}
.research{background:linear-gradient(135deg,#6a1b9a,#ce93d8);}
.others{background:linear-gradient(135deg,#ef6c00,#ffb74d);}
.exam{background:linear-gradient(135deg,#c62828,#ff8a80);}

.install-btn{
  position:fixed;
  bottom:20px;
  right:20px;
  background:#2e7d32;
  color:#fff;
  padding:12px 16px;
  border-radius:30px;
  font-size:14px;
  font-weight:bold;
  cursor:pointer;
  display:none;
  z-index:9999;
  box-shadow:0 4px 12px rgba(0,0,0,0.25);
}
.install-btn:hover{
  transform:translateY(-3px);
}
</style>
</head>

<body>

<div class="container">
  <h1>Krisishikkha</h1>
  <p>Education â€¢ Notes â€¢ Secure PDF Reading Platform</p>

  <div class="main-grid">
    <a href="ntrca.html" class="main-box ntrca">ðŸ“˜ NTRCA Notes</a>
    <a href="pages/categories/bcs.html" class="main-box bcs">ðŸ“— BCS</a>
    <a href="pages/categories/research.html" class="main-box research">ðŸ”¬ Research Institute</a>
    <a href="pages/categories/others.html" class="main-box others">ðŸ“‚ Others</a>

    <!-- à¦¶à§à¦§à§ à¦à¦‡ à¦²à¦¿à¦‚à¦• à¦­à¦¬à¦¿à¦·à§à¦¯à¦¤à§‡ à¦ªà¦°à¦¿à¦¬à¦°à§à¦¤à¦¨ à¦•à¦°à¦¬à§‡à¦¨ -->
    <a href="exam-corner.html" class="main-box exam">
Exam Corner
</a>
  </div>

  <footer style="margin-top:80px; text-align:center; padding:20px; background:#2e7d32; color:white;">
    <a href="privacy-policy.html" style="color:white; margin-right:15px;">Privacy Policy</a>
    <a href="terms.html" style="color:white;">Terms & Conditions</a>
  </footer>
</div>

<!-- Install Button -->
<div id="installBtn" class="install-btn">ðŸ“² Install App</div>

<script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('service-worker.js').then(reg => {

    // à¦ªà§à¦°à¦¤à¦¿ à§© à¦®à¦¿à¦¨à¦¿à¦Ÿà§‡ update check
    setInterval(() => {
      reg.update();
    }, 3 * 60 * 1000);

    reg.addEventListener('updatefound', () => {
      const newWorker = reg.installing;

      newWorker.addEventListener('statechange', () => {
        if (newWorker.state === 'installed') {
          if (navigator.serviceWorker.controller) {
            showUpdatePopup();
          }
        }
      });
    });

  });
}

function showUpdatePopup() {
  let seconds = 5;

  const popup = document.createElement('div');
  popup.innerHTML = `
    <div style="
      position:fixed;
      bottom:20px;
      left:50%;
      transform:translateX(-50%);
      background:#1e7e34;
      color:white;
      padding:15px 25px;
      border-radius:10px;
      box-shadow:0 5px 15px rgba(0,0,0,0.3);
      z-index:9999;
      font-weight:bold;
    ">
      ðŸ”„ New Update Available<br>
      Reloading in <span id="countdown">5</span>s
      <button id="cancelBtn" style="
        margin-left:15px;
        padding:5px 10px;
        border:none;
        background:white;
        color:#1e7e34;
        font-weight:bold;
        border-radius:5px;
      ">Cancel</button>
    </div>
  `;

  document.body.appendChild(popup);

  const countdown = document.getElementById("countdown");
  const cancelBtn = document.getElementById("cancelBtn");

  const timer = setInterval(() => {
    seconds--;
    countdown.textContent = seconds;
    if (seconds === 0) {
      clearInterval(timer);
      location.reload();
    }
  }, 1000);

  cancelBtn.onclick = () => {
    clearInterval(timer);
    popup.remove();
  };
}
</script>
<script>
  let deferredPrompt;
const installBtn = document.getElementById('installBtn');

window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;
  installBtn.style.display = "block";
});

installBtn.addEventListener('click', async () => {
  if (!deferredPrompt) return;
  deferredPrompt.prompt();
  await deferredPrompt.userChoice;
  deferredPrompt = null;
});
</script>

</body>
</html>
